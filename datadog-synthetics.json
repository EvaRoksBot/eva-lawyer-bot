{
  "tests": [
    {
      "id": "healthcheck",
      "name": "API Health Check",
      "type": "api",
      "subtype": "http",
      "request": {
        "method": "GET",
        "url": "https://${BASE_URL}/healthz",
        "timeout": 10
      },
      "assertions": [
        {
          "type": "statusCode",
          "operator": "is",
          "target": 200
        },
        {
          "type": "body",
          "operator": "contains",
          "target": "ok"
        }
      ],
      "locations": ["aws:eu-central-1"],
      "tags": ["eva-lawyer-bot", "healthcheck"],
      "options": {
        "retry": { "count": 2, "interval": 300 },
        "min_failure_duration": 60,
        "min_location_failed": 1
      }
    },
    {
      "id": "telegram-webhook",
      "name": "Telegram Webhook Validation",
      "type": "api",
      "subtype": "multi",
      "steps": [
        {
          "name": "Check webhook status",
          "request": {
            "method": "GET",
            "url": "https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/getWebhookInfo",
            "timeout": 10
          },
          "assertions": [
            {
              "type": "statusCode",
              "operator": "is",
              "target": 200
            },
            {
              "type": "jsonPath",
              "operator": "isNot",
              "target": null,
              "property": "$.result.url"
            }
          ]
        }
      ],
      "locations": ["aws:eu-central-1"],
      "tags": ["eva-lawyer-bot", "telegram"],
      "options": {
        "retry": { "count": 1, "interval": 300 },
        "min_failure_duration": 0,
        "min_location_failed": 1
      }
    }
  ]
}

