````markdown name=README.md
# Eva Lawyer Bot

Юридический ИИ-бот для помощи с анализом и подготовкой документов, быстрыми справками по правовым вопросам и автоматизацией рутинных задач. Проект ориентирован на безопасный деплой в облако, контейнеризацию и соблюдение DevOps/SRE-практик.

## Содержание
- [Стек](#стек)
- [Архитектура и структура проекта](#архитектура-и-структура-проекта)
- [Быстрый старт](#быстрый-старт)
- [Переменные окружения](#переменные-окружения)
- [Локальный запуск](#локальный-запуск)
- [Docker](#docker)
- [Деплой](#деплой)
  - [Vercel](#vercel)
  - [Heroku](#heroku)
- [Качество кода и безопасность](#качество-кода-и-безопасность)
- [Тестирование](#тестирование)
- [Требования](#требования)
- [FAQ](#faq)
- [Лицензия](#лицензия)

---

## Стек
- Язык/рантайм: Node.js + TypeScript
- Хостинг/Функции: Vercel (см. `vercel.json`)
- Процессный рантайм: Heroku (см. `Procfile`) — альтернативный вариант запуска
- Конфигурация: `.env`/`.env.example`
- Зависимости Python (опционально для воркеров/утилит): `requirements.txt`
- Контейнеризация: директория `docker/`
- API-эндпоинты/функции: `api/`
- Основной код приложения: `src/`

Примечание: В репозитории присутствуют как TypeScript/Node-компоненты, так и Python-зависимости (для вспомогательных задач). Используйте только необходимые части под вашу конфигурацию.

## Архитектура и структура проекта
```
.
├─ .env                    # локальные переменные окружения (НЕ коммитить)
├─ .env.example            # образец переменных окружения
├─ .env.template           # шаблон для генерации .env
├─ .github/                # (опционально) workflows и политики PR
├─ api/                    # безсерверные функции/эндпоинты (Vercel)
├─ docker/                 # docker-конфигурации/скрипты
├─ docs/                   # документация
├─ src/                    # исходный код приложения (TypeScript)
├─ package.json            # Node.js зависимости/скрипты
├─ requirements.txt        # Python зависимости (если используются)
├─ tsconfig.json           # конфигурация TypeScript
├─ vercel.json             # конфигурация Vercel
├─ Procfile                # процессный профиль для Heroku
└─ README.md               # вы здесь
```

Высокоуровневый поток:
- Вход (чат/вебхук/HTTP) → обработка в `api/` или `src/` → интеграция с LLM/сторонними сервисами → ответ клиенту.
- Переменные окружения регулируют ключи доступа, настройки моделей, уровни логирования, порты и др.

## Быстрый старт
1) Клонируйте репозиторий:
```bash
git clone https://github.com/EvaRoksBot/eva-lawyer-bot.git
cd eva-lawyer-bot
```

2) Создайте файл окружения:
```bash
cp .env.example .env
# отредактируйте .env, вставьте ваши ключи/URL
```

3) Установите зависимости Node:
```bash
npm ci
# альтернативно: npm install
```

4) Локальный запуск в режиме разработки (если определено в package.json):
```bash
npm run dev
```

5) Сборка и запуск прод-режима (если определено в package.json):
```bash
npm run build
npm start
```

Для задач на Python (если применимо):
```bash
python -m venv .venv
source .venv/bin/activate  # Windows: .venv\Scripts\activate
pip install -r requirements.txt
```

## Переменные окружения
Актуальный список и значения по умолчанию смотрите в `.env.example`. Ниже — типичные переменные (названия могут отличаться в зависимости от конкретной реализации):

- OPENAI_API_KEY — ключ доступа к LLM (если используется OpenAI-совместимый провайдер)
- MODEL / OPENAI_MODEL — модель по умолчанию
- TELEGRAM_BOT_TOKEN — токен бота Telegram (если подключён)
- TELEGRAM_WEBHOOK_URL — внешний вебхук (если webhook-режим)
- PORT — порт локального HTTP-сервера (если используется собственный сервер)
- LOG_LEVEL — уровень логирования (error, warn, info, debug)
- ALLOWED_ORIGINS — список доменов (CORS)
- DATABASE_URL — строка подключения к БД (если есть БД)
- REDIS_URL — строка подключения к Redis (если используется кэш)

Никогда не коммитьте реальные секреты. Для локальных запусков используйте `.env`. В CI/CD секреты передавайте через переменные окружения в настройках провайдера.

## Локальный запуск
- Node.js/TypeScript:
  - Dev: `npm run dev`
  - Prod: `npm run build && npm start`
- Серверныеless функции Vercel из `api/` работают локально через `vercel dev` (при установленном Vercel CLI).
- Проверяйте доступность эндпоинтов в терминале/браузере. Типовой health-check, если реализован, может находиться в `api/` (например, `/api/health`).

## Docker
Если вы предпочитаете контейнеризацию:
```bash
# Сборка
docker build -t eva-lawyer-bot:local .

# Запуск (проброс .env)
docker run --env-file .env -p 3000:3000 eva-lawyer-bot:local
```
Для продвинутых конфигураций и compose-сценариев смотрите директорию `docker/`.

## Деплой

### Vercel
- Репозиторий подключается к Vercel.
- Переменные окружения настраиваются в Project Settings → Environment Variables.
- Конфигурация берётся из `vercel.json`.
- Деплой из ветки `main` или через `vercel deploy`.

### Heroku
- Используется `Procfile` (например, `web: node dist/server.js`).
- Настройте переменные окружения:
```bash
heroku create
heroku config:set $(cat .env | xargs)    # проверьте состав .env, не загружайте локально-специфичное
git push heroku main
```

## Качество кода и безопасность
Рекомендуемые практики, предусмотренные проектом:
- Единый стиль кода (TypeScript через `tsconfig.json`, линт/форматтер — по скриптам в `package.json`, если определены).
- Сканирование секретов: храните ключи только в переменных окружения, используйте `.env.example` как шаблон.
- Зависимости фиксируются lock-файлом Node (package-lock.json/PNPM lockfile) — используйте детерминированную установку (`npm ci`).
- SAST/CodeQL, Dependency/Secret scanning — рекомендуется включить в CI.
- SBOM (например, через syft) — рекомендуется для прод-сборок.

## Тестирование
- Модульные/интеграционные тесты размещайте в `tests/` или рядом с исходниками.
- Типовые команды (если определены):
```bash
npm test
npm run test:coverage
```
- Для внешних вызовов используйте моки/фейки. Целевое покрытие — 80%+.

## Требования
- Node.js: 18+ (рекомендуется 20 LTS)
- npm: 9+ (или PNPM/Yarn по вашему выбору)
- Опционально:
  - Python 3.10/3.11 для вспомогательных задач (если применяется)
  - Docker 24+, Docker Compose

## FAQ
- В: Где смотреть список переменных окружения?
  - О: В файле `.env.example`.
- В: Как сменить модель LLM?
  - О: Поменяйте переменные окружения, связанные с провайдером/моделью (например, `OPENAI_MODEL`), и перезапустите сервис.
- В: Как включить webhook для Telegram?
  - О: Задайте `TELEGRAM_WEBHOOK_URL` и настройте вебхук у бота; убедитесь, что эндпоинт опубликован и доступен извне.
- В: Как запускать без Docker?
  - О: Установите Node-зависимости (`npm ci`), настройте `.env`, используйте `npm run dev` или `npm start`.

## Лицензия
См. файл LICENSE (если присутствует). При отсутствии файла лицензии все права защищены по умолчанию.

---

Если вы нашли проблему — создайте issue с описанием окружения, шагами воспроизведения и ожидаемым поведением.
````
